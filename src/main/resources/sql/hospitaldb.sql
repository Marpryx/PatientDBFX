DROP DATABASE IF EXISTS HOSPITALPATIENTSDB;

CREATE DATABASE HOSPITALPATIENTSDB;

USE HOSPITALPATIENTSDB;

GRANT ALL PRIVILEGES ON HOSPITALPATIENTSDB.* TO TheUser@"%" IDENTIFIED BY "maryna";
GRANT ALL PRIVILEGES ON HOSPITALPATIENTSDB.* TO TheUser@"localhost" IDENTIFIED BY "maryna";

DROP TABLE IF EXISTS PATIENT;

CREATE TABLE PATIENT (
  PATIENTID int NOT NULL AUTO_INCREMENT PRIMARY KEY,
  FIRSTNAME varchar(30) NOT NULL DEFAULT '',
  LASTNAME varchar(30) NOT NULL DEFAULT '',
  ADDRESS varchar(100) NOT NULL DEFAULT '',
  PHONE varchar(20) NOT NULL DEFAULT '',
  DIAGNOSIS varchar(60) NOT NULL DEFAULT '',
  ADMISSIONDATE timestamp DEFAULT 0
) ENGINE=InnoDB;

DROP TABLE IF EXISTS MEDICATION;

CREATE TABLE MEDICATION (
  MEDICATIONID int NOT NULL AUTO_INCREMENT PRIMARY KEY,
  PATIENTID int,
  MEDICAT varchar(45) NOT NULL DEFAULT '',
  DOSAGE varchar(30) NOT NULL DEFAULT '',
  FORM varchar(20) NOT NULL DEFAULT '',
  DATEOFMED timestamp DEFAULT 0,
  KEY PATIENTID (PATIENTID),
  CONSTRAINT patient_3 FOREIGN KEY (PATIENTID) REFERENCES PATIENT (PATIENTID)
) ENGINE=InnoDB;

INSERT INTO PATIENT (FIRSTNAME, LASTNAME, ADDRESS, PHONE, DIAGNOSIS, ADMISSIONDATE) values 
("Amanda","Lee","400 de Gaspe, Montreal H3E 1H2", "4387777559", "Asthma", "2013-05-06 9:00:00"),
("Kurt","Bunny","6000 Boulevard Rome, Brossard J4Y 0B6", "4385658559", "Appendicitis", "2014-02-22 9:00:00"),
("Rimma","Konchesky","705 Saint-Catherine, Montreal H3B 4G5", "5142883708", "Diabetes", "2016-06-09 9:00:00"),
("Kianu","Luitt","301 Saint-Catherine, Montreal H3B 4G5", "4389778345", "Angina", "2016-12-12 9:00:00"),
("Sandra","Heavy","4701 Wellington St, Verdun H4G 1X2", "5142645208", "Cirrhosis", "2017-02-02 9:00:00");


INSERT INTO MEDICATION(PATIENTID, MEDICAT, DOSAGE, FORM, DATEOFMED) values
(1, "Acetaminophen", "500 mg", "Pills", "2017-02-24 11:00:00"),
(2, "Atorvastatin", "100 mg", "Pills", "2017-03-12 11:00:00"),
(3, "Codeine", "0.82ml", "Drops", "2017-03-02 11:00:00"),
(4, "Oxycodone", "200 mg", "Pills", "2017-02-11 11:00:00"),
(5, "Atorvastatin", "1.0 ml", "Drops", "2017-02-15 11:00:00");